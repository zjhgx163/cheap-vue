"use strict";(self["webpackChunkcheap_quasar"]=self["webpackChunkcheap_quasar"]||[]).push([[821],{93821:function(t,a,e){e.r(a),e.d(a,{default:function(){return d}});var o=e(59835);function s(t,a,e,s,r,i){return(0,o.wg)(),(0,o.iD)("div",null,"正在登陆...")}e(60893),e(69665),e(52519),e(11476),e(32119),e(4845);var r=e(17779),i={props:["code","state"],data:function(){return{host:e.g.config.domain,showing:!1,taobaoPwd:"",alertText:"淘口令已复制\n请打开手淘"}},mounted:function(){this.wechatLogin(this.code,this.state)},methods:{wechatLogin:function(t,a){var o=this;this.$q.loading.show({delay:200}),this.$axios.post("".concat(e.g.config.domain,"/wechat/accesstokenlogin"),{code:this.code,state:this.state}).then((function(t){if(null!=t.data)if(o.$q.loading.hide(),o.$q.localStorage.set("userInfo",t.data),"buy"==o.state)o.buyClick(o.$route.params.urlCode);else if(o.state.indexOf("coupon")>-1){var a=o.state.slice(6);r.log("coupon_index = "+a),o.takeCouponClick(o.$route.params.urlCode,a)}else"yunpanItem"==o.state?o.$router.push({path:"/d/"+o.$route.params.urlCode}):"yunpanArticle"==o.state?o.$router.push({path:"/article/"+o.$route.params.urlCode}):"tool"==o.state?o.$router.push({path:"/user/converturl"}):"waimai"==o.state?o.$router.push({path:"/coupon",query:{actId:o.$route.params.urlCode}}):"yunpanList"==o.state?o.$router.push({path:"/list?q="}):(r.log("order list"+o.state),o.$router.push({path:"/my/orderlist/all",query:{userId:o.$route.params.urlCode,status:o.state}}));else r.log("error! res.data is null")}))},buyClick:function(t){var a=this;this.$axios.post("".concat(this.host,"/goods/go/").concat(t),{}).then((function(e){if(r.log(e.data),"string"===typeof e.data){if(/(http|https):\S*/.test(e.data))window.location.href=e.data;else if(/redirect:\S*/.test(e.data)){var o=e.data.slice(9);a.$router.push({path:o})}else r.log("taobaoPwd = "+e.data),a.$router.push({path:"item",name:"detail",params:{urlCode:t},query:{taobao_code:e.data}});a.$q.loading.hide()}else a.$q.loading.hide(),a.$q.notify({type:"negative",message:"好物已过期"})}))},takeCouponClick:function(t,a){var e=this;r.log("coupon urlCode = "+t),this.$axios.post("".concat(this.host,"/goods/coupon-url/").concat(t,"?index=").concat(a),{}).then((function(a){if(r.log(a.data),"string"===typeof a.data){if(/(http|https):\S*/.test(a.data))window.location.href=a.data;else if(/redirect:\S*/.test(a.data)){var o=a.data.slice(9);e.$router.push({path:o})}else r.log("taobaoPwd = "+a.data),e.$router.push({path:"item",name:"detail",params:{urlCode:t},query:{taobao_code:a.data}});e.$q.loading.hide()}else e.$q.loading.hide(),e.$q.notify({type:"negative",message:"好物已过期"})}))}}},n=e(11639);const u=(0,n.Z)(i,[["render",s]]);var d=u}}]);